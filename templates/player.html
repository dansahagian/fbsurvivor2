{% extends "./base.html" %}
    {% block content %}
        {% if can_play %}
            <strong>{{ player_count }}</strong> players have joined! Will you?<br><br>
            <span class="space">
                <a class="blue-button" href="{% url 'play' player.link season.year %}">Play</a>
            <br><br><br><br>
            </span>
        {% else %}
            {% if playable and playable not in years %}
                <a href="{% url 'player' player.link playable %}">Join the {{ playable }} season!</a>
                <br><br>
            {% endif %}
        {% endif %}
        {% if player_status %}
            <strong>
                {% if deadline %}Next lock: {{ deadline }}<br><br>{% endif %}
            </strong>
            <table>
                <tr>
                    <th>Username</th>
                    <th>$</th>
                    <th>Ws</th>
                    <th>Ls</th>
                    <th style="border-right: 10px solid #f9f9f9;">Pick</th>
                    {% if board %}
                    {% for week in weeks %}
                        <th>{{ week|stringformat:"02d" }}</th>
                    {% endfor %}
                    {% endif %}
                </tr>
                {% for ps, picks in board %}
                    {% if ps.player == player %}
                        {% if player.is_dark_mode %}
                            <tr style="font-weight:bold; border: 3px solid white;">
                        {% else %}
                            <tr style="font-weight:bold; border: 3px solid black;">
                        {% endif %}
                    {% else %}
                        <tr>
                    {% endif %}
                        <td>
                            {% if ps.player.emoji %}{{ ps.player.emoji }} {% endif %}
                            {{ ps.player.username }}
                        </td>
                        <td>
                            {% if ps.is_paid %}
                                $
                            {% endif %}
                        </td>
                        <td>{{ ps.win_count }}</td>
                        <td>{{ ps.loss_count }}</td>

                            <td style="border-right: 10px solid #f9f9f9;"
                                {% with picks|last as current %}
                                    {% if current.result == "R" %}
                                        class="black"
                                    {% elif current.result == "W" %}
                                        class="win"
                                    {% elif current.result == "L" %}
                                        class="loss"
                                    {% endif %}
                                    >
                                    {% if current.team %}{{ current.team.team_code }}{% endif %}
                                {% endwith %}
                            </td>
                        {% for pick in picks %}
                            <td
                                {% if pick.result == "R" %}
                                    class="black"
                                {% elif pick.result == "W" %}
                                    class="win"
                                {% elif pick.result == "L" %}
                                    class="loss"
                                {% endif %}
                            >
                            {% if pick.team %}{{ pick.team.team_code }}{% endif %}
                            </td>
                        {% endfor %}
                        </tr>
                {% endfor %}
            </table>
        {% endif %}
        <a class="toggle" href="{% url 'dark_mode' player.link %}">
            Toggle Dark/Light Mode
        </a>
        <br><br>
        {% for year in years %}
            <span class="space">
                <a href="{% url 'player' player.link year %}">{{ year }}</a>
            </span>
            {% if forloop.counter|divisibleby:5  %}
                <br><br>
            {% endif %}
        {% endfor %}
    {% endblock %}